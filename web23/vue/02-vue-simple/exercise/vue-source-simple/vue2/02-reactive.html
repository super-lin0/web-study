<div id="app"></div>

<script>
  function defineReactive(obj, key, val) {
    Object.defineProperty(obj, key, {
      get() {
        console.log("get", key);
        return val;
      },
      set(newVal) {
        if (newVal !== val) {
          val = newVal;
          console.log("set", newVal);
          update();
        }
      },
    });
  }
  const obj = {};

  defineReactive(obj, "foo", "");

  obj.foo = new Date().toLocaleTimeString();

  setInterval(() => {
    app.innerHTML = new Date().toLocaleTimeString();
  });

  function update() {
    app.innerHTML = obj.foo;
  }
</script>
