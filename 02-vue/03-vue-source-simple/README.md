1、角色
Vue 源码中实现依赖收集，实现了三个类：

Dep：扮演观察目标的角色，每一个数据都会有 Dep 类实例，它内部有个 subs 队列，subs 就是 subscribers 的意思，保存着依赖本数据的观察者，当本数据变更时，调用 dep.notify()通知观察者
Watcher：扮演观察者的角色，进行观察者函数的包装处理。如 render()函数，会被进行包装成一个 Watcher 实例
Observer：辅助的可观测类，数组/对象通过它的转化，可成为可观测数据

发布者-订阅者模式也叫观察者模式。 他是一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于他的对象都会得到通知并自动更新，解决了主体对象与观察者之间功能的耦合。就相当于公众号一样，假如我们一个班级都订阅了公众号，那么这个班级的每个人都是订阅者（subscriber），公众号则是发布者（publisher）。如果某一天公众号发现文章内容出错了，需要修改一个错别字（修改 vm.\$data 中的数据），是不是要通知每一个订阅者？总不能 A 同学那里的文章发生了改变，而 B 同学的文章没有发生改变吧。

观察者：

在 Observer 模块中，我们要做的事情也不多，就是提供一个`walk()`方法，递归劫持`vm.$data`中的所有数据，拦截 setter 和 getter。如果数据变更，则发布通知,让所有订阅者更新内容，改变视图

Watcher 模块

Watcher 的作用就是将 Compile 解析的结果和 Observer 观察的对象关联起来，建立关系，当 Observer 观察的数据发生变化是，接收通知（`dep.notify`）告诉 Watcher，Watcher 在通过 Compile 更新 DOM。这里面涉及一个发布者-订阅者模式的思想。

Watcher 是连接 Compile 和 Observer 的桥梁。
